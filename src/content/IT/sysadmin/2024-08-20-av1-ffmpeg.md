---
layout: post
title: –ó–∞–º–µ—Ç–∫–∞ - AV1 –∫–æ–¥–µ–∫ –∏ FFmpeg
date: 2024-08-20 17:00:00 +0500
categories: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
tag: Video
---

# –ö–æ–¥–µ–∫ AV1
[FFmpeg](https://ffmpeg.org/ffmpeg-codecs) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ AV1 –∏—Å–ø–æ–ª—å–∑—É—é –≤–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∞ –∏–º–µ–Ω–Ω–æ - libaom, librav1e, libsvtav1 –∏ libdav1d.

> libdav1d - –¢–æ–ª—å–∫–æ –¥–µ–∫–æ–¥–µ—Ä –∏ –µ–≥–æ –Ω–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª.

#### libaom
- [–ì–∏—Ç](https://github.com/ultrawide/libaom)
- [–û–ø—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](https://trac.ffmpeg.org/wiki/Encode/AV1)

–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç 4 –≥–æ–¥–∞ –Ω–∞–∑–∞–¥. –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ libvpx –∫–æ—Ç–æ—Ä—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç Google –∏ –∫–æ—Ç–æ—Ä—ã–π –¥–æ —Å–∏—Ö –ø–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è. 

#### librav1e
- [–ì–∏—Ç](https://github.com/xiph/rav1e)
- [–û–ø—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](https://ffmpeg.org/ffmpeg-codecs.html#librav1e)

–ù–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ Rust –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É—é—Ç —Å–µ–±—è –∫–∞–∫ —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –∏ —Å–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π AV1 –∫–æ–¥–µ—Ä. –°—Ä–∞–≤–Ω–∏–≤–∞—é—Ç —Å–µ–±—è —Å libaom –∏ —á—Ç–æ –æ–Ω–∏ –≥–æ—Ä–∞–∑–¥–æ –±—ã—Å—Ç—Ä–µ–µ.
–í—Ä–æ–¥–µ –¥–æ —Å–∏—Ö –ø–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–æ –≤–∏–¥–µ–ª –Ω–æ–≤–æ—Å—Ç—å —á—Ç–æ Mozilla —É–≤–æ–ª–∏–ª–∞ –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ —Å 2020 –∫–∞–∫–æ–≥–æ-—Ç–æ –≥–æ–¥–∞ –∞–∫—Ç–∏–≤–Ω–æ –≤—Å–µ –∂–µ –æ–Ω –Ω–µ –ø–∏–ª–∏—Ç—Å—è.

#### libsvtav1
- [–ì–∏—Ç](https://gitlab.com/AOMediaCodec/SVT-AV1)
- [–û–ø—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](https://ffmpeg.org/ffmpeg-codecs.html#libdav1d)

–ö–∞–∫ —è –ø–æ–Ω–∏–º–∞—é —è–≤–ª—è–µ—Ç—Å—è —Å–µ–π—á–∞—Å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –ø—Ä–∏–Ω—è—Ç—ã–º Alliance of Open Media (AOM).
–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏ Intel –∏ Netflix –≤ 2020 –≥–æ–¥—É, —Å–æ–≤–ø–∞–ª–æ —Å –∑–∞–±—Ä–æ—Å–æ–º libaom ü§î. –°–∞–º—ã–π –Ω–æ–≤—ã–π –∫–æ–¥–µ—Ä. –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —á—Ç–æ–±—ã —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã—Ö –∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –º–∞—à—Ç–∏–Ω–∞—Ö.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ò—Å—Ö–æ–¥–Ω—ã–π —Ä–æ–ª–∏–∫ –≤ FullHD - 47.6 –ú–ë, 29 —Å–µ–∫—É–Ω–¥.

#### –î–æ–ø: 
- –≤–∏–¥–µ–æ –∫–æ–¥–µ–∫ H.264, 
- 60,00 –∫–∞–¥—Ä–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É, 
- –∞—É–¥–∏–æ –∫–æ–¥–µ–∫ MPEG-4 AAC –≤ –±–∏—Ç—Ä–µ–π—Ç–µ 256 –∫–±–∏—Ç/—Å.

#### –ö–æ–¥–∏—Ä—É–µ–º –≤:
- H.264 –∏—Å—Ö–æ–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä, crf 24 
- H.264 50% –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, crf 24
- H.264 25% –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, crf 24
- AV1 –∏—Å—Ö–æ–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä, crf 38 
- AV1  50% –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, crf 38
- AV1  25% –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, crf 38

> –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ H.264 –æ—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–∞–∫ —á–∞—Å—Ç—å —Ñ–ª–æ—É, –æ—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è —Ç–∞—Ä–∏—Ç—Å—è –Ω–∞ AV1 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç–æ–ª—å–∫–æ –≤ –Ω–µ–º –º–µ–Ω—è–µ–º –∫–æ–¥–µ–∫–∏ –≤ —Ö–æ–¥–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ –∑–Ω–∞—á–∏—Ç –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ H.264 –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –ø—Ä–∏–Ω–µ–±—Ä–µ—á—å.

#### –ö–æ–º–∞–Ω–¥—ã:
- librav1e `-c:v:3 librav1e -rav1e-params qp=30:speed=10:tile-columns=8:tile-rows=4:threads=0`
- libaom-av1 `-c:v:3 libaom-av1 -crf 26 -aom-params cpu-used=8`
- libsvtav1 `-c:v:3 libsvtav1 -crf 38`


| –ö–æ–¥–µ–∫         | –í—Ä–µ–º—è    | –£—Ç–∏–ª–∏–∑–∞—Ü–∏—è CPU |
|:--------------|:---------|:---------------|
| librav1e      |  8 –º–∏–Ω—É—Ç | ~16%           |
| libaom-av1    |  6 –º–∏–Ω—É—Ç | ~30%           |
| libsvtav1     | 1 –º–∏–Ω—É—Ç–∞ | ~100%          |  

### üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å 

**libsvtav1** - –∏–º–µ–µ—Ç —Ç–æ—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥—Å—Ç–≤–æ –Ω–∞–¥ –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –∫–æ–¥–µ—Ä–∞–º–∏ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. –û–Ω –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –º–æ–∂–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Ç–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å CPU –∏ —Å–∫–æ—Ä–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–∏–º–∞ —Å —Ç—Ä–∞–Ω—Å–∫–æ–¥–∏–Ω–≥–æ–º –≤ H.264. [Can I use?](https://caniuse.com/av1) - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.